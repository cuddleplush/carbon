import { bind } from "astal"
import Hyprland from "gi://AstalHyprland"
import { substitutes } from "../../vars"

export function Windows(monitor: number): JSX.Element {
    const hyprland = Hyprland.get_default()

	console.log(monitor);

    return <box spacing={8}>
        {bind(hyprland, "clients").as(clients => clients
            .filter(client => client.class != "")
            .filter(client => client.monitor === hyprland.get_monitor(monitor))
			.sort()
            .map(client => (
                <button
                    className={bind(hyprland, "focusedClient").as(fc =>
                        `${fc == client ? "active" : ""} module`,
                    )}
					onHover={(self) => self.toggleClassName("hover", true)}
					onHoverLost={(self) => self.toggleClassName("hover", false)}
					tooltipText={client.title}
                    label={client.class
						.replace("footclient", "foot")
						.replace("com.obsproject.Studio", "OBS")
						.replace("LibreWolf", "librewolf")
					}
                />
            )),
        )}
    </box>
}
